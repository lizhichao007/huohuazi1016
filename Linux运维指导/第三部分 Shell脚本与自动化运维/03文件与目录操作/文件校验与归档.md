

# Linux æ–‡ä»¶æ ¡éªŒä¸å½’æ¡£ï¼ˆtarã€gzipï¼‰æŒ‡å—

Linuxç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶æ ¡éªŒä¸å½’æ¡£æ˜¯éå¸¸å¸¸è§çš„æ“ä½œï¼Œå°¤å…¶æ˜¯åœ¨æ•°æ®å¤‡ä»½ã€ä¼ è¾“æˆ–åˆ†å‘æ—¶ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è¯¦ç»†è®²è§£å¦‚ä½•ä½¿ç”¨`tar`å’Œ`gzip`å·¥å…·è¿›è¡Œæ–‡ä»¶å½’æ¡£å’Œå‹ç¼©ï¼ŒåŒæ—¶ä¹Ÿä¼šä»‹ç»å¦‚ä½•æ ¡éªŒæ–‡ä»¶çš„å®Œæ•´æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦å†…å®¹ï¼š

## 1. æ–‡ä»¶æ ¡éªŒ

åœ¨æ–‡ä»¶ä¼ è¾“æˆ–å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šé‡åˆ°æ–‡ä»¶æŸåçš„æƒ…å†µã€‚ä¸ºäº†ç¡®ä¿æ–‡ä»¶çš„å®Œæ•´æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–‡ä»¶æ ¡éªŒå·¥å…·æ¥éªŒè¯æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚

### 1.1 ä½¿ç”¨ `md5sum` æ ¡éªŒæ–‡ä»¶

`md5sum` æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ ¡éªŒå·¥å…·ï¼Œå®ƒé€šè¿‡è®¡ç®—æ–‡ä»¶çš„MD5å“ˆå¸Œå€¼æ¥éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚

#### ç”Ÿæˆæ–‡ä»¶çš„MD5æ ¡éªŒå€¼

```bash
md5sum filename
```

**ç¤ºä¾‹ï¼š**

```bash
md5sum example.txt
```

**è¾“å‡ºï¼š**

```
d41d8cd98f00b204e9800998ecf8427e  example.txt
```

**è§£é‡Šï¼š**

- `d41d8cd98f00b204e9800998ecf8427e` æ˜¯æ–‡ä»¶çš„MD5æ ¡éªŒå€¼ã€‚
- `example.txt` æ˜¯æ–‡ä»¶åã€‚

#### éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

åœ¨æ¥æ”¶åˆ°æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ï¼š

```bash
md5sum -c filename.md5
```

**ç¤ºä¾‹ï¼š**

```bash
md5sum -c example.txt.md5
```

**è¾“å‡ºï¼š**

```
example.txt: OK
```

**è§£é‡Šï¼š**

- å¦‚æœæ–‡ä»¶æ˜¯å®Œæ•´çš„ï¼Œè¾“å‡ºä¸º `OK`ã€‚
- å¦‚æœæ–‡ä»¶æŸåï¼Œè¾“å‡ºä¸º `FAILED`ã€‚

### 1.2 ä½¿ç”¨ `sha256sum` æ ¡éªŒæ–‡ä»¶

`sha256sum` æ˜¯å¦ä¸€ä¸ªå¸¸ç”¨çš„æ ¡éªŒå·¥å…·ï¼Œå®ƒé€šè¿‡è®¡ç®—æ–‡ä»¶çš„SHA-256å“ˆå¸Œå€¼æ¥éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚

#### ç”Ÿæˆæ–‡ä»¶çš„SHA-256æ ¡éªŒå€¼

```bash
sha256sum filename
```

**ç¤ºä¾‹ï¼š**

```bash
sha256sum example.txt
```

**è¾“å‡ºï¼š**

```
e3b0c44298fc1c149afbf4c8996fb92a2a30a129876091451a8da34a4bba3bb5  example.txt
```

**è§£é‡Šï¼š**

- `e3b0c44298fc1c149afbf4c8996fb92a2a30a129876091451a8da34a4bba3bb5` æ˜¯æ–‡ä»¶çš„SHA-256æ ¡éªŒå€¼ã€‚

#### éªŒè¯æ–‡ä»¶å®Œæ•´æ€§

åœ¨æ¥æ”¶åˆ°æ–‡ä»¶åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ï¼š

```bash
sha256sum -c filename.sha256
```

**ç¤ºä¾‹ï¼š**

```bash
sha256sum -c example.txt.sha256
```

**è¾“å‡ºï¼š**

```
example.txt: OK
```

**è§£é‡Šï¼š**

- å¦‚æœæ–‡ä»¶æ˜¯å®Œæ•´çš„ï¼Œè¾“å‡ºä¸º `OK`ã€‚
- å¦‚æœæ–‡ä»¶æŸåï¼Œè¾“å‡ºä¸º `FAILED`ã€‚

## 2. æ–‡ä»¶å½’æ¡£

åœ¨Linuxç³»ç»Ÿä¸­ï¼Œ`tar` æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å½’æ¡£å·¥å…·ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªå½’æ¡£æ–‡ä»¶ã€‚å½’æ¡£æ–‡ä»¶é€šå¸¸ä¼šä¸å‹ç¼©å·¥å…·ï¼ˆå¦‚ `gzip`ï¼‰ç»“åˆä½¿ç”¨ï¼Œä»¥å‡å°æ–‡ä»¶çš„å¤§å°ã€‚

### 2.1 ä½¿ç”¨ `tar` åˆ›å»ºå½’æ¡£æ–‡ä»¶

#### åˆ›å»ºå½’æ¡£æ–‡ä»¶

```bash
tar -cvf archive.tar files/
```

**å‚æ•°è§£é‡Šï¼š**

- `-c`: åˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -cvf backup.tar /home/user/documents/
```

**è¾“å‡ºï¼š**

```
a documents/
a documents/file1.txt
a documents/file2.txt
a documents/file3.txt
```

**è§£é‡Šï¼š**

- `a` è¡¨ç¤ºæ–‡ä»¶è¢«æ·»åŠ åˆ°å½’æ¡£æ–‡ä»¶ä¸­ã€‚
- `documents/` æ˜¯è¢«å½’æ¡£çš„ç›®å½•ã€‚
- `file1.txt`, `file2.txt`, `file3.txt` æ˜¯è¢«å½’æ¡£çš„æ–‡ä»¶ã€‚

#### æŸ¥çœ‹å½’æ¡£æ–‡ä»¶å†…å®¹

```bash
tar -tvf archive.tar
```

**å‚æ•°è§£é‡Šï¼š**

- `-t`: æŸ¥çœ‹å½’æ¡£æ–‡ä»¶å†…å®¹ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -tvf backup.tar
```

**è¾“å‡ºï¼š**

```
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file1.txt
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file2.txt
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file3.txt
```

**è§£é‡Šï¼š**

- `-rw-r--r--`: æ–‡ä»¶æƒé™ã€‚
- `0 0`: æ–‡ä»¶æ‰€æœ‰è€…å’Œç»„ã€‚
- `0`: æ–‡ä»¶å¤§å°ã€‚
- `2023-10-01 12:34`: æ–‡ä»¶ä¿®æ”¹æ—¶é—´ã€‚
- `documents/`, `documents/file1.txt`, `documents/file2.txt`, `documents/file3.txt`: å½’æ¡£æ–‡ä»¶ä¸­çš„å†…å®¹ã€‚

#### æå–å½’æ¡£æ–‡ä»¶

```bash
tar -xvf archive.tar
```

**å‚æ•°è§£é‡Šï¼š**

- `-x`: æå–å½’æ¡£æ–‡ä»¶ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -xvf backup.tar
```

**è¾“å‡ºï¼š**

```
documents/
documents/file1.txt
documents/file2.txt
documents/file3.txt
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«æå–åˆ°å½“å‰ç›®å½•ä¸­ã€‚

### 2.2 ä½¿ç”¨ `gzip` å‹ç¼©å½’æ¡£æ–‡ä»¶

`gzip` æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å‹ç¼©å·¥å…·ï¼Œå®ƒå¯ä»¥é€šè¿‡å‹ç¼©å½’æ¡£æ–‡ä»¶æ¥å‡å°æ–‡ä»¶çš„å¤§å°ã€‚

#### å‹ç¼©å½’æ¡£æ–‡ä»¶

```bash
gzip archive.tar
```

**ç¤ºä¾‹ï¼š**

```bash
gzip backup.tar
```

**è¾“å‡ºï¼š**

```
backup.tar:     72.3% -- replaced with backup.tar.gz
```

**è§£é‡Šï¼š**

- `backup.tar` è¢«å‹ç¼©ä¸º `backup.tar.gz`ã€‚

#### è§£å‹å‹ç¼©æ–‡ä»¶

```bash
gunzip backup.tar.gz
```

**ç¤ºä¾‹ï¼š**

```bash
gunzip backup.tar.gz
```

**è¾“å‡ºï¼š**

```
backup.tar.gz:     72.3% -- replaced with backup.tar
```

**è§£é‡Šï¼š**

- `backup.tar.gz` è¢«è§£å‹ä¸º `backup.tar`ã€‚

### 2.3 ä½¿ç”¨ `tar` å’Œ `gzip` ä¸€èµ·å‹ç¼©æ–‡ä»¶

`tar` å’Œ `gzip` å¯ä»¥ç»“åˆä½¿ç”¨ï¼Œç›´æ¥åˆ›å»ºå‹ç¼©çš„å½’æ¡£æ–‡ä»¶ã€‚

#### åˆ›å»ºå‹ç¼©çš„å½’æ¡£æ–‡ä»¶

```bash
tar -czvf archive.tar.gz files/
```

**å‚æ•°è§£é‡Šï¼š**

- `-c`: åˆ›å»ºæ–°çš„å½’æ¡£æ–‡ä»¶ã€‚
- `-z`: ä½¿ç”¨ `gzip` å‹ç¼©ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -czvf backup.tar.gz /home/user/documents/
```

**è¾“å‡ºï¼š**

```
a documents/
a documents/file1.txt
a documents/file2.txt
a documents/file3.txt
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«å½’æ¡£å¹¶å‹ç¼©ä¸º `backup.tar.gz`ã€‚

#### æŸ¥çœ‹å‹ç¼©çš„å½’æ¡£æ–‡ä»¶å†…å®¹

```bash
tar -tzvf archive.tar.gz
```

**å‚æ•°è§£é‡Šï¼š**

- `-t`: æŸ¥çœ‹å½’æ¡£æ–‡ä»¶å†…å®¹ã€‚
- `-z`: ä½¿ç”¨ `gzip` è§£å‹ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -tzvf backup.tar.gz
```

**è¾“å‡ºï¼š**

```
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file1.txt
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file2.txt
-rw-r--r-- 0 0        0 2023-10-01 12:34 documents/file3.txt
```

**è§£é‡Šï¼š**

- æ–‡ä»¶å†…å®¹è¢«æŸ¥çœ‹ï¼Œä½†æ–‡ä»¶æœªè¢«æå–ã€‚

#### æå–å‹ç¼©çš„å½’æ¡£æ–‡ä»¶

```bash
tar -xzvf archive.tar.gz
```

**å‚æ•°è§£é‡Šï¼š**

- `-x`: æå–å½’æ¡£æ–‡ä»¶ã€‚
- `-z`: ä½¿ç”¨ `gzip` è§£å‹ã€‚
- `-v`: æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚
- `-f`: æŒ‡å®šå½’æ¡£æ–‡ä»¶åã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -xzvf backup.tar.gz
```

**è¾“å‡ºï¼š**

```
documents/
documents/file1.txt
documents/file2.txt
documents/file3.txt
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«æå–åˆ°å½“å‰ç›®å½•ä¸­ã€‚

## 3. æ ¡éªŒä¸å½’æ¡£ç»“åˆ

åœ¨å®é™…æ“ä½œä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå°†æ–‡ä»¶æ ¡éªŒä¸å½’æ¡£ç»“åˆä½¿ç”¨ï¼Œä»¥ç¡®ä¿æ–‡ä»¶åœ¨ä¼ è¾“æˆ–å­˜å‚¨è¿‡ç¨‹ä¸­çš„å®Œæ•´æ€§ã€‚

### 3.1 åˆ›å»ºå½’æ¡£æ–‡ä»¶å¹¶ç”ŸæˆMD5æ ¡éªŒå€¼

```bash
tar -czvf archive.tar.gz files/ && md5sum archive.tar.gz > archive.tar.gz.md5
```

**ç¤ºä¾‹ï¼š**

```bash
tar -czvf backup.tar.gz /home/user/documents/ && md5sum backup.tar.gz > backup.tar.gz.md5
```

**è§£é‡Šï¼š**

- `tar -czvf backup.tar.gz /home/user/documents/` åˆ›å»ºå‹ç¼©çš„å½’æ¡£æ–‡ä»¶ã€‚
- `md5sum backup.tar.gz > backup.tar.gz.md5` ç”Ÿæˆå½’æ¡£æ–‡ä»¶çš„MD5æ ¡éªŒå€¼å¹¶ä¿å­˜åˆ° `backup.tar.gz.md5` æ–‡ä»¶ä¸­ã€‚

### 3.2 éªŒè¯å½’æ¡£æ–‡ä»¶çš„å®Œæ•´æ€§

```bash
md5sum -c archive.tar.gz.md5
```

**ç¤ºä¾‹ï¼š**

```bash
md5sum -c backup.tar.gz.md5
```

**è¾“å‡ºï¼š**

```
backup.tar.gz: OK
```

**è§£é‡Šï¼š**

- å¦‚æœå½’æ¡£æ–‡ä»¶æ˜¯å®Œæ•´çš„ï¼Œè¾“å‡ºä¸º `OK`ã€‚
- å¦‚æœå½’æ¡£æ–‡ä»¶æŸåï¼Œè¾“å‡ºä¸º `FAILED`ã€‚

### 3.3 æå–å½’æ¡£æ–‡ä»¶å¹¶éªŒè¯å®Œæ•´æ€§

```bash
tar -xzvf archive.tar.gz && md5sum -c archive.tar.gz.md5
```

**ç¤ºä¾‹ï¼š**

```bash
tar -xzvf backup.tar.gz && md5sum -c backup.tar.gz.md5
```

**è¾“å‡ºï¼š**

```
documents/
documents/file1.txt
documents/file2.txt
documents/file3.txt
backup.tar.gz: OK
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«æå–åˆ°å½“å‰ç›®å½•ä¸­ã€‚
- åŒæ—¶éªŒè¯å½’æ¡£æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚

## 4. å®ç”¨æŠ€å·§

### 4.1 è‡ªåŠ¨åŒ–å½’æ¡£å’Œæ ¡éªŒ

å¯ä»¥å°†å½’æ¡£å’Œæ ¡éªŒçš„æ“ä½œå†™æˆä¸€ä¸ªè„šæœ¬ï¼Œä»¥æé«˜æ•ˆç‡ã€‚

**è„šæœ¬ç¤ºä¾‹ï¼š**

```bash
#!/bin/bash
tar -czvf backup.tar.gz /home/user/documents/
md5sum backup.tar.gz > backup.tar.gz.md5
```

**è§£é‡Šï¼š**

- è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºå½’æ¡£æ–‡ä»¶å¹¶ç”ŸæˆMD5æ ¡éªŒå€¼ã€‚

### 4.2 åˆ†å·å‹ç¼©

å¦‚æœæ–‡ä»¶éå¸¸å¤§ï¼Œå¯ä»¥ä½¿ç”¨ `tar` çš„åˆ†å·åŠŸèƒ½å°†æ–‡ä»¶åˆ†æˆå¤šä¸ªè¾ƒå°çš„å‹ç¼©åŒ…ã€‚

#### åˆ›å»ºåˆ†å·å‹ç¼©åŒ…

```bash
tar -czvf archive.tar.gz --tape-length=100M --totals
```

**å‚æ•°è§£é‡Šï¼š**

- `--tape-length=100M`: æ¯ä¸ªå‹ç¼©åŒ…çš„å¤§å°ä¸º100MBã€‚
- `--totals`: æ˜¾ç¤ºæ¯ä¸ªå·çš„å¤§å°ã€‚

**ç¤ºä¾‹ï¼š**

```bash
tar -czvf backup.tar.gz --tape-length=100M --totals /home/user/documents/
```

**è¾“å‡ºï¼š**

```
tar: Total bytes written: 104857600 (100MB)
tar: Total bytes written: 209715200 (200MB)
...
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«åˆ†æˆå¤šä¸ª100MBçš„å‹ç¼©åŒ…ã€‚

#### æå–åˆ†å·å‹ç¼©åŒ…

```bash
tar -xzvf archive.tar.gz
```

**ç¤ºä¾‹ï¼š**

```bash
tar -xzvf backup.tar.gz
```

**è¾“å‡ºï¼š**

```
tar: This is volume 1 of a multi-volume archive
tar: This is volume 2 of a multi-volume archive
...
```

**è§£é‡Šï¼š**

- æå–æ—¶éœ€è¦ä¾æ¬¡æä¾›æ¯ä¸ªåˆ†å·å‹ç¼©åŒ…ã€‚

### 4.3 è¿œç¨‹ä¼ è¾“

å¯ä»¥ä½¿ç”¨ `scp` æˆ– `rsync` å°†å½’æ¡£æ–‡ä»¶ä¼ è¾“åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œå¹¶åœ¨ä¼ è¾“åéªŒè¯æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚

#### ä½¿ç”¨ `scp` ä¼ è¾“æ–‡ä»¶

```bash
scp archive.tar.gz user@remote_host:/path/to/destination
```

**ç¤ºä¾‹ï¼š**

```bash
scp backup.tar.gz user@remote_host:/home/user/backup/
```

**è§£é‡Šï¼š**

- æ–‡ä»¶è¢«ä¼ è¾“åˆ°è¿œç¨‹æœåŠ¡å™¨çš„æŒ‡å®šè·¯å¾„ã€‚

#### ä½¿ç”¨ `rsync` ä¼ è¾“æ–‡ä»¶

```bash
rsync -avz archive.tar.gz user@remote_host:/path/to/destination
```

**ç¤ºä¾‹ï¼š**

```bash
rsync -avz backup.tar.gz user@remote_host:/home/user/backup/
```

**è§£é‡Šï¼š**

- `rsync` ä¼šåŒæ­¥æ–‡ä»¶ï¼Œå¹¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‹ç¼©æ–‡ä»¶ã€‚

## 5. æ€»ç»“

é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬è¯¦ç»†è®²è§£äº†å¦‚ä½•åœ¨Linuxç³»ç»Ÿä¸­ä½¿ç”¨ `tar` å’Œ `gzip` è¿›è¡Œæ–‡ä»¶å½’æ¡£å’Œå‹ç¼©ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ `md5sum` å’Œ `sha256sum` è¿›è¡Œæ–‡ä»¶æ ¡éªŒã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†å¦‚ä½•ç»“åˆè¿™äº›å·¥å…·è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œå’Œåˆ†å·å‹ç¼©ï¼Œä»¥æé«˜æ•ˆç‡å’Œå¤„ç†å¤§æ–‡ä»¶çš„èƒ½åŠ›ã€‚

å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œå¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼ ğŸ˜Š