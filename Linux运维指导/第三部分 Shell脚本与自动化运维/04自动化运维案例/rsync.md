

# ä½¿ç”¨rsyncå®ç°å¢é‡å¤‡ä»½çš„è¯¦ç»†æ­¥éª¤

## ğŸŒŸ ä»€ä¹ˆæ˜¯rsyncï¼Ÿ

`rsync` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡ä»¶åŒæ­¥å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºå¢é‡å¤‡ä»½ã€‚å®ƒé€šè¿‡æ¯”è¾ƒæºæ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶çš„å·®å¼‚ï¼Œä»…ä¼ è¾“å˜åŒ–çš„éƒ¨åˆ†ï¼Œä»è€ŒèŠ‚çœæ—¶é—´å’Œå­˜å‚¨ç©ºé—´ã€‚

## ğŸ“ å¢é‡å¤‡ä»½çš„ä¼˜åŠ¿

1. **èŠ‚çœæ—¶é—´**ï¼šåªä¼ è¾“å˜åŒ–çš„æ•°æ®ã€‚
2. **èŠ‚çœå­˜å‚¨**ï¼šé¿å…é‡å¤å¤‡ä»½ç›¸åŒçš„æ•°æ®ã€‚
3. **é«˜æ•ˆå¯é **ï¼šå³ä½¿ç½‘ç»œä¸­æ–­ï¼Œä¹Ÿèƒ½ä»æ–­ç‚¹ç»­ä¼ ã€‚

---

## ğŸ“˜ æ­¥éª¤ä¸€ï¼šå®‰è£…rsync

å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆé»˜è®¤å®‰è£…äº†rsyncï¼Œå¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨åŒ…ç®¡ç†å™¨å®‰è£…ï¼š

**Debian/Ubuntuï¼š**

```bash
sudo apt-get install rsync
```

**Fedoraï¼š**

```bash
sudo dnf install rsync
```

**CentOS/RHELï¼š**

```bash
sudo yum install rsync
```

---

## ğŸ“˜ æ­¥éª¤äºŒï¼šé…ç½®æºå’Œç›®æ ‡ç›®å½•

å‡è®¾ä½ è¦å¤‡ä»½çš„ç›®å½•æ˜¯ `/home/user/project`ï¼Œå¤‡ä»½ç›®æ ‡ç›®å½•æ˜¯ `/home/user/backup`ã€‚

ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨ï¼š

```bash
mkdir -p /home/user/backup
```

---

## ğŸ“˜ æ­¥éª¤ä¸‰ï¼šç¼–å†™rsyncå‘½ä»¤

åŸºæœ¬çš„rsyncå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
rsync -avz /home/user/project/ /home/user/backup/
```

**å‚æ•°è§£é‡Šï¼š**

- `-a`ï¼šå½’æ¡£æ¨¡å¼ï¼Œä¿æŒæ–‡ä»¶å±æ€§ã€‚
- `-v`ï¼šè¯¦ç»†æ¨¡å¼ï¼Œæ˜¾ç¤ºå¤‡ä»½è¿‡ç¨‹ã€‚
- `-z`ï¼šå‹ç¼©ä¼ è¾“çš„æ•°æ®ã€‚

**æ³¨æ„ï¼š** æºç›®å½•æœ«å°¾çš„æ–œæ  `/home/user/project/` å¾ˆé‡è¦ï¼Œå®ƒè¡¨ç¤ºå¤‡ä»½ç›®å½•ä¸­çš„æ‰€æœ‰å†…å®¹ï¼Œè€Œä¸æ˜¯ç›®å½•æœ¬èº«ã€‚

---

## ğŸ“˜ æ­¥éª¤å››ï¼šæ‰§è¡Œå…¨é‡å¤‡ä»½

ç¬¬ä¸€æ¬¡è¿è¡Œrsyncå‘½ä»¤ä¼šæ‰§è¡Œå…¨é‡å¤‡ä»½ï¼Œä¼ è¾“æ‰€æœ‰æ–‡ä»¶ã€‚

```bash
rsync -avz /home/user/project/ /home/user/backup/
```

**ç¤ºä¾‹è¾“å‡ºï¼š**

```
sending incremental file list
file1.txt
file2.txt
subdir/
subdir/file3.txt
total: 3 files transferred
```

---

## ğŸ“˜ æ­¥éª¤äº”ï¼šä¿®æ”¹æ–‡ä»¶å¹¶æ‰§è¡Œå¢é‡å¤‡ä»½

ä¿®æ”¹ä¸€ä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š

```bash
echo "æ–°å¢å†…å®¹" >> /home/user/project/file1.txt
```

å†æ¬¡è¿è¡Œrsyncå‘½ä»¤ï¼š

```bash
rsync -avz /home/user/project/ /home/user/backup/
```

**ç¤ºä¾‹è¾“å‡ºï¼š**

```
sending incremental file list
file1.txt
total: 1 file transferred
```

è¿™æ¬¡åªä¼ è¾“äº†ä¿®æ”¹è¿‡çš„ `file1.txt`ã€‚

---

## ğŸ“˜ æ­¥éª¤å…­ï¼šè‡ªåŠ¨åŒ–å¢é‡å¤‡ä»½

ä¸ºäº†æ¯å¤©è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ï¼Œå¯ä»¥å°†rsyncå‘½ä»¤å†™å…¥è„šæœ¬ï¼Œå¹¶ä½¿ç”¨ `cron` å®šæ—¶ä»»åŠ¡ã€‚

**åˆ›å»ºè„šæœ¬ï¼š**

```bash
#!/bin/bash
rsync -avz /home/user/project/ /home/user/backup/
```

ä¿å­˜ä¸º `incremental_backup.sh`ï¼Œèµ‹äºˆæ‰§è¡Œæƒé™ï¼š

```bash
chmod +x incremental_backup.sh
```

**è®¾ç½®cronä»»åŠ¡ï¼š**

```bash
crontab -e
```

æ·»åŠ ä»¥ä¸‹è¡Œï¼š

```bash
0 0 * * * /home/user/incremental_backup.sh
```

è¿™æ ·ï¼Œæ¯å¤©åˆå¤œ0ç‚¹è‡ªåŠ¨æ‰§è¡Œå¢é‡å¤‡ä»½ã€‚

---

## ğŸ“˜ å¢é‡å¤‡ä»½çš„å…¶ä»–æŠ€å·§

1. **æ’é™¤ç‰¹å®šæ–‡ä»¶æˆ–ç›®å½•**

å¦‚æœä½ æƒ³æ’é™¤æŸäº›æ–‡ä»¶æˆ–ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ `--exclude` å‚æ•°ã€‚

```bash
rsync -avz --exclude='*.log' /home/user/project/ /home/user/backup/
```

2. **ä¿æŒæ–‡ä»¶æƒé™å’Œç¬¦å·é“¾æ¥**

ä½¿ç”¨ `-a` å‚æ•°å¯ä»¥ä¿æŒæ–‡ä»¶çš„æƒé™ã€æ—¶é—´æˆ³å’Œç¬¦å·é“¾æ¥ã€‚

3. **è¿œç¨‹å¤‡ä»½**

`rsync` è¿˜æ”¯æŒé€šè¿‡ SSH è¿›è¡Œè¿œç¨‹å¤‡ä»½ã€‚

```bash
rsync -avz /home/user/project/ user@remote-server:/home/backup/
```

---

## ğŸ“˜ æ€»ç»“

é€šè¿‡ `rsync` å®ç°å¢é‡å¤‡ä»½ï¼Œå¯ä»¥é«˜æ•ˆåœ°ä¿æŠ¤ä½ çš„æ•°æ®ã€‚å®ƒä¸ä»…èŠ‚çœæ—¶é—´å’Œå­˜å‚¨ç©ºé—´ï¼Œè¿˜æ”¯æŒå¤šç§çµæ´»çš„é…ç½®ï¼Œæ»¡è¶³ä¸åŒçš„å¤‡ä»½éœ€æ±‚ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥æ”¾å¿ƒåœ°è‡ªåŠ¨åŒ–ä½ çš„æ•°æ®å¤‡ä»½ä»»åŠ¡ï¼Œè®© `rsync` ä¸ºä½ ä¿é©¾æŠ¤èˆªï¼ğŸš€